@page "/teste-mudblazor"
@using System.ComponentModel.DataAnnotations
@rendermode InteractiveServer

<PageTitle>Teste MudBlazor - Miles Manager</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">
    <MudText Typo="Typo.h3" GutterBottom="true" Color="Color.Primary">
        üé® Teste de Componentes MudBlazor
    </MudText>
    <MudText Typo="Typo.body1" Class="mb-4">
        Esta p√°gina valida que todos os componentes essenciais do MudBlazor est√£o funcionando corretamente.
    </MudText>

    <!-- Teste 1: Bot√µes -->
    <MudPaper Class="pa-4 mb-4" Elevation="2">
        <MudText Typo="Typo.h6" GutterBottom="true">‚úÖ Teste 1: Bot√µes</MudText>
        <MudButton Variant="Variant.Filled" Color="Color.Primary" Class="mr-2">Prim√°rio</MudButton>
        <MudButton Variant="Variant.Outlined" Color="Color.Secondary" Class="mr-2">Secund√°rio</MudButton>
        <MudButton Variant="Variant.Text" Color="Color.Success">Sucesso</MudButton>
    </MudPaper>

    <!-- Teste 2: Campos de Texto -->
    <MudPaper Class="pa-4 mb-4" Elevation="2">
        <MudText Typo="Typo.h6" GutterBottom="true">‚úÖ Teste 2: Campos de Texto</MudText>
        <MudGrid>
            <MudItem xs="12" md="6">
                <MudTextField @bind-Value="nomeCartao"
                              Label="Nome do Cart√£o"
                              Variant="Variant.Outlined"
                              Adornment="Adornment.Start"
                              AdornmentIcon="@Icons.Material.Filled.CreditCard" />
            </MudItem>
            <MudItem xs="12" md="6">
                <MudTextField @bind-Value="limiteCartao"
                              Label="Limite (R$)"
                              Variant="Variant.Outlined"
                              Format="C2"
                              Adornment="Adornment.Start"
                              AdornmentText="R$" />
            </MudItem>
        </MudGrid>
    </MudPaper>

    <!-- Teste 3: Sele√ß√£o (Bandeira do Cart√£o) -->
    <MudPaper Class="pa-4 mb-4" Elevation="2">
        <MudText Typo="Typo.h6" GutterBottom="true">‚úÖ Teste 3: Select (Bandeira do Cart√£o)</MudText>
        <MudSelect T="string"
                   Label="Bandeira"
                   Variant="Variant.Outlined"
                   @bind-Value="bandeiraEscolhida"
                   AnchorOrigin="Origin.BottomCenter">
            <MudSelectItem Value="@("Visa")">Visa</MudSelectItem>
            <MudSelectItem Value="@("Mastercard")">Mastercard</MudSelectItem>
            <MudSelectItem Value="@("Elo")">Elo</MudSelectItem>
            <MudSelectItem Value="@("American Express")">American Express</MudSelectItem>
        </MudSelect>
    </MudPaper>

    <!-- Teste 4: Date Picker -->
    <MudPaper Class="pa-4 mb-4" Elevation="2">
        <MudText Typo="Typo.h6" GutterBottom="true">‚úÖ Teste 4: Seletor de Data</MudText>
        <MudDatePicker Label="Data da Compra"
                       @bind-Date="dataCompra"
                       Variant="Variant.Outlined"
                       Editable="true"
                       DateFormat="dd/MM/yyyy"
                       Placeholder="Selecione uma data" />
    </MudPaper>

    <!-- Teste 5: Valida√ß√£o de Formul√°rio -->
    <MudPaper Class="pa-4 mb-4" Elevation="2">
        <MudText Typo="Typo.h6" GutterBottom="true">‚úÖ Teste 5: Valida√ß√£o (RF-008)</MudText>
        <MudForm @ref="form" @bind-IsValid="@formValido">
            <MudTextField @bind-Value="emailTeste"
                          Label="E-mail"
                          Variant="Variant.Outlined"
                          Required="true"
                          RequiredError="E-mail √© obrigat√≥rio!"
                          Validation="@(new EmailAddressAttribute() {ErrorMessage = "E-mail inv√°lido"})" />

            <MudNumericField @bind-Value="valorTeste"
                             Label="Valor (R$)"
                             Variant="Variant.Outlined"
                             Min="0.01M"
                             Required="true"
                             RequiredError="Valor √© obrigat√≥rio!"
                             Class="mt-3" />

            <MudButton Variant="Variant.Filled"
                       Color="Color.Primary"
                       Disabled="@(!formValido)"
                       Class="mt-3">
                Salvar
            </MudButton>
        </MudForm>
    </MudPaper>

    <!-- Teste 6: Tabela -->
    <MudPaper Class="pa-4 mb-4" Elevation="2">
        <MudText Typo="Typo.h6" GutterBottom="true">‚úÖ Teste 6: Tabela de Dados</MudText>
        <MudTable Items="@cartoesMock" Hover="true" Breakpoint="Breakpoint.Sm">
            <HeaderContent>
                <MudTh>Nome</MudTh>
                <MudTh>Bandeira</MudTh>
                <MudTh>Limite</MudTh>
            </HeaderContent>
            <RowTemplate>
                <MudTd DataLabel="Nome">@context.Nome</MudTd>
                <MudTd DataLabel="Bandeira">@context.Bandeira</MudTd>
                <MudTd DataLabel="Limite">@context.Limite.ToString("C")</MudTd>
            </RowTemplate>
        </MudTable>
    </MudPaper>

    <!-- Teste 7: Alertas e Feedback -->
    <MudPaper Class="pa-4 mb-4" Elevation="2">
        <MudText Typo="Typo.h6" GutterBottom="true">‚úÖ Teste 7: Alertas (Feedback Visual)</MudText>
        <MudAlert Severity="Severity.Success" Class="mb-2">Opera√ß√£o realizada com sucesso!</MudAlert>
        <MudAlert Severity="Severity.Error" Class="mb-2">Erro: Campo obrigat√≥rio n√£o preenchido.</MudAlert>
        <MudAlert Severity="Severity.Warning" Class="mb-2">Aten√ß√£o: Dados n√£o salvos.</MudAlert>
        <MudAlert Severity="Severity.Info">Informa√ß√£o: Use m√°scaras nos campos.</MudAlert>
    </MudPaper>

    <!-- Status Final -->
    <MudPaper Class="pa-4" Elevation="3" Style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <MudText Typo="Typo.h5" Align="Align.Center" Style="color: white;">
            ‚úÖ MudBlazor est√° 100% funcional!
        </MudText>
        <MudText Typo="Typo.body1" Align="Align.Center" Style="color: white;" Class="mt-2">
            Todos os componentes necess√°rios para o Miles Manager est√£o operacionais.
        </MudText>
    </MudPaper>
</MudContainer>

@code {
    // Dados de teste
    private string nomeCartao = "Meu Cart√£o Platinum";
    private string limiteCartao = "5000,00";
    private string bandeiraEscolhida = "Visa";
    private DateTime? dataCompra = DateTime.Today;

    // Valida√ß√£o
    private MudForm form;
    private bool formValido = false;
    private string emailTeste = "";
    private decimal valorTeste = 0;

    // Mock de dados para tabela
    private List<CartaoMock> cartoesMock = new()
    {
        new CartaoMock { Nome = "Nubank Platinum", Bandeira = "Mastercard", Limite = 8000.00M },
        new CartaoMock { Nome = "Santander SX", Bandeira = "Visa", Limite = 12000.00M },
        new CartaoMock { Nome = "Ita√∫ Personnalit√©", Bandeira = "Visa", Limite = 25000.00M }
    };

    public class CartaoMock
    {
        public string Nome { get; set; }
        public string Bandeira { get; set; }
        public decimal Limite { get; set; }
    }
}
