### Especificação de Caso de Uso: Manter Usuário

**Identificador:** UC-05

**Ator Principal:** Usuário **Requisitos Relacionados:** RF-002 (Manter Usuário), RF-008 (Validação de Dados)
**Objetivo:** Permitir que o usuário visualize e atualize seus dados cadastrais (Nome) e credenciais de segurança (Senha) para manter suas informações atualizadas no sistema.

#### 1. Pré-condições

- O Usuário deve estar devidamente autenticado no sistema (Sessão ativa).

#### 2. Condição de Entrada (Gatilho)

- O Usuário seleciona a opção "Meu Perfil" ou "Configurações de Conta" no menu do sistema.

#### 3. Fluxo Principal (Caminho Feliz - Edição de Perfil)

Este fluxo descreve a atualização de dados cadastrais básicos.

1. **[Ator]** solicita a visualização dos seus dados de perfil.
2. **[Sistema]** apresenta o formulário preenchido com os dados atuais: Nome e E-mail (o e-mail geralmente é exibido apenas para leitura como chave de identificação).
3. **[Ator]** altera os dados permitidos (ex: corrige ou atualiza o Nome).
4. **[Ator]** confirma a operação (clica em "Salvar Alterações").
5. **[Sistema]** executa a validação de integridade (Include: UC-Validar Dados) para garantir que o campo Nome não esteja vazio.
6. **[Sistema]** persiste as alterações na base de dados.
7. **[Sistema]** apresenta mensagem de sucesso: "Dados atualizados com sucesso".
8. **[Sistema]** recarrega a página exibindo as informações atualizadas.
9. **O caso de uso termina.**

#### 4. Fluxos Alternativos (Variantes) UC-05

Fluxos específicos para alteração de credenciais sensíveis.

##### **FA-01: Alterar Senha**

- **Gatilho:** No passo 2 do Fluxo Principal, o usuário clica na aba ou botão "Alterar Senha".

1. **[Sistema]** exibe os campos: "Senha Atual", "Nova Senha" e "Confirmar Nova Senha".
2. **[Ator]** preenche as informações de segurança.
3. **[Ator]** clica em "Atualizar Senha".
4. **[Sistema]** valida se a "Nova Senha" atende aos requisitos mínimos e se a confirmação é idêntica.
5. **[Sistema]** verifica se a "Senha Atual" informada corresponde à registrada no banco (Autenticação).
6. **[Sistema]** substitui a senha antiga pela nova (criptografada) no banco de dados.
7. **[Sistema]** exibe mensagem de sucesso e pode solicitar novo login por segurança.

#### 5. Fluxos de Exceção (Tratamento de Erros)

Tratamento de erros de validação e segurança.

##### **FE-01: Dados Inválidos (Violação do RF-008)**

- **Gatilho:** No passo 5 do Fluxo Principal ou passo 4 do FA-01.

1. **[Sistema]** detecta campos vazios (Nome em branco) ou senhas que não coincidem (no caso de alteração de senha).
2. **[Sistema]** interrompe a gravação.
3. **[Sistema]** exibe mensagens de alerta: "Nome é obrigatório" ou "A confirmação da senha não confere".
4. **[Retorno]:** O fluxo retorna ao formulário para que o usuário corrija a entrada.

##### **FE-02: Senha Atual Incorreta**

- **Gatilho:** No passo 5 do Fluxo Alternativo FA-01.

1. **[Sistema]** verifica que a senha atual digitada pelo usuário não confere com a senha armazenada no banco de dados.
2. **[Sistema]** bloqueia a alteração da nova senha.
3. **[Sistema]** exibe mensagem de erro: "A senha atual informada está incorreta".
4. **[Retorno]:** O sistema limpa os campos de senha e solicita nova tentativa.

### 6. Pós-condições

- Os dados cadastrais (Nome) ou a credencial de acesso (Senha) são atualizados permanentemente.
- Em caso de troca de senha, o usuário deverá utilizar a nova credencial nos próximos acessos (RF-001).
